# ğŸš€ Distributed Task Queue

![Go](https://img.shields.io/badge/Go-1.23-00ADD8?style=flat&logo=go)
![Redis](https://img.shields.io/badge/Redis-7.0-DC382D?style=flat&logo=redis)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=flat&logo=docker)
![License](https://img.shields.io/badge/License-MIT-green)

ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ°Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ½Ğ° **Go**, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‰Ğ°Ñ **Redis** ĞºĞ°Ğº Ğ±Ñ€Ğ¾ĞºĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.

Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ **Worker Pool**, **Exponential Backoff Retry**, **Graceful Shutdown** Ğ¸ **Structured Logging** (`slog`).

---

## ğŸ“– Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

- [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
- [ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸](#-ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ-Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸)
- [Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#-Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
- [Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚](#-Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹-ÑÑ‚Ğ°Ñ€Ñ‚)
- [API](#-api)
- [Ğ¢Ğ¸Ğ¿Ñ‹ Ğ·Ğ°Ğ´Ğ°Ñ‡](#-Ñ‚Ğ¸Ğ¿Ñ‹-Ğ·Ğ°Ğ´Ğ°Ñ‡)
- [Retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°](#-retry-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°)
- [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
- [Ğ¢ĞµÑÑ‚Ñ‹](#-Ñ‚ĞµÑÑ‚Ñ‹)
- [ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ](#%EF%B8%8F-ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)

---

## ğŸ— ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¸Ğ· Ñ‚Ñ€Ñ‘Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²:

1. **API Server** â€” Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ HTTP-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸ ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² Redis
2. **Redis** â€” Ğ¿ĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡ (Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ + Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹)
3. **Worker Pool** â€” Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ³Ğ¾Ñ€ÑƒÑ‚Ğ¸Ğ½, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚       â”‚          Redis            â”‚       â”‚  Worker Pool â”‚
â”‚  Client      â”‚       â”‚                          â”‚       â”‚              â”‚
â”‚  (curl/app)  â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  taskqueue:pending [list] â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  Worker 0    â”‚
â”‚              â”‚  HTTP â”‚  taskqueue:task:id {json} â”‚  Pop  â”‚  Worker 1    â”‚
â”‚  POST /tasks â”‚       â”‚                          â”‚â—€â”€â”€â”€â”€â”€â”€â”‚  Worker 2    â”‚
â”‚  GET /tasks  â”‚       â”‚                          â”‚Update â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

### Reliability (ĞĞ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ)
- **Retry Policy** â€” Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ
- **Exponential Backoff** â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ°Ğ¼Ğ¸ Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚: `1s â†’ 2s â†’ 4s`
- **Dead Letter Logic** â€” Ğ¿Ğ¾ÑĞ»Ğµ `MaxRetry` (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ 3) Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ¿Ğ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ÑÑ `failed`

### Concurrency (ĞšĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ)
- ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ **Worker Pool** Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡
- ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¾Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (`sync.RWMutex`, `sync.WaitGroup`)

### Observability (ĞĞ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ)
- **Structured Logging** Ñ‡ĞµÑ€ĞµĞ· `log/slog` (Go 1.21+) Ğ² JSON-Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ»Ğ¾Ğ³ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ `task_id` Ğ¸ `worker_id` Ğ´Ğ»Ñ ÑĞºĞ²Ğ¾Ğ·Ğ½Ğ¾Ğ¹ Ñ‚Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸

### DevOps Ready
- ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· **Docker Compose**
- **Graceful Shutdown** â€” Ğ¿Ñ€Ğ¸ `SIGTERM`/`SIGINT` ÑĞµÑ€Ğ²ĞµÑ€ Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ñ‘Ñ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹ Ğ´Ğ¾Ğ´ĞµĞ»Ñ‹Ğ²Ğ°ÑÑ‚ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸

---

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ |
|-----------|-----------|
| Ğ¯Ğ·Ñ‹Ğº | Go 1.23 |
| Ğ‘Ñ€Ğ¾ĞºĞµÑ€ / Ğ‘Ğ” | Redis 7 (go-redis/v9) |
| HTTP Ñ€Ğ¾ÑƒÑ‚ĞµÑ€ | chi v5 |
| ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ | ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (12-Factor App) |
| Ğ¢ĞµÑÑ‚Ñ‹ | `testing` + `httptest` |
| ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | Docker, Docker Compose |
| Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | `log/slog` (structured JSON) |

---

## âš¡ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Docker Compose (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

```bash
git clone https://github.com/podushkina/taskqueue.git
cd taskqueue
docker-compose up --build
```

Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ `:8080`.

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾

```bash
# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Redis
docker run -d -p 6379:6379 --name redis redis:7-alpine

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
cp .env.example .env
go run cmd/server/main.go
```

---

## ğŸ“š API

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ

**`POST /tasks`**

```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -d '{"type": "echo", "payload": "Hello World"}'
```

ĞÑ‚Ğ²ĞµÑ‚ (`201 Created`):
```json
{
  "id": "5335d502-a2c7-4abd-9496-c64692b43869",
  "type": "echo",
  "payload": "Hello World",
  "status": "pending",
  "retries": 0,
  "max_retry": 3,
  "created_at": "2026-02-01T10:53:32Z",
  "updated_at": "2026-02-01T10:53:32Z"
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸

**`GET /tasks/{id}`**

```bash
curl http://localhost:8080/tasks/5335d502-a2c7-4abd-9496-c64692b43869
```

ĞÑ‚Ğ²ĞµÑ‚ (`200 OK`):
```json
{
  "id": "5335d502-a2c7-4abd-9496-c64692b43869",
  "type": "echo",
  "status": "completed",
  "result": "echo: Hello World",
  "retries": 0,
  "max_retry": 3,
  "created_at": "2026-02-01T10:53:32Z",
  "updated_at": "2026-02-01T10:53:33Z"
}
```

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ·Ğ°Ğ´Ğ°Ñ‡

**`GET /tasks`**

```bash
curl http://localhost:8080/tasks
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ

**`DELETE /tasks/{id}`**

```bash
curl -X DELETE http://localhost:8080/tasks/5335d502-a2c7-4abd-9496-c64692b43869
```

ĞÑ‚Ğ²ĞµÑ‚: `204 No Content`

### Health Check

**`GET /health`**

```bash
curl http://localhost:8080/health
# {"status": "ok"}
```

---

## ğŸ¯ Ğ¢Ğ¸Ğ¿Ñ‹ Ğ·Ğ°Ğ´Ğ°Ñ‡

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Payload | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Result |
|-----|----------|---------------|--------------|
| `echo` | Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ payload | `"Hello"` | `"echo: Hello"` |
| `reverse` | ĞŸĞµÑ€ĞµĞ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ ÑÑ‚Ñ€Ğ¾ĞºÑƒ | `"Hello"` | `"olleH"` |
| `sum` | Ğ¡ÑƒĞ¼Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ JSON-Ğ¼Ğ°ÑÑĞ¸Ğ² Ñ‡Ğ¸ÑĞµĞ» | `"[1, 2, 5]"` | `"8.00"` |
| `slow` | Ğ˜Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ³Ğ¾Ğ¹ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (5 ÑĞµĞº) | Ğ»ÑĞ±Ğ¾Ğ¹ | `"completed after 5 seconds"` |
| `flaky` | Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ (Ğ´ĞµĞ¼Ğ¾ retry) | Ğ»ÑĞ±Ğ¾Ğ¹ | `"flaky: ..."` Ğ¸Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° |

---

## ğŸ”„ Retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

ĞŸÑ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ñ ÑĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ backoff:

```
ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° 1: Ğ¾ÑˆĞ¸Ğ±ĞºĞ°  â†’  Ğ¶Ğ´Ñ‘Ğ¼ 1s  â†’  retry
ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° 2: Ğ¾ÑˆĞ¸Ğ±ĞºĞ°  â†’  Ğ¶Ğ´Ñ‘Ğ¼ 2s  â†’  retry
ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° 3: Ğ¾ÑˆĞ¸Ğ±ĞºĞ°  â†’  Ğ¶Ğ´Ñ‘Ğ¼ 4s  â†’  retry
ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° 4: Ğ¾ÑˆĞ¸Ğ±ĞºĞ°  â†’  ÑÑ‚Ğ°Ñ‚ÑƒÑ "failed" (max retries exceeded)
```

Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
                  â–¼                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ pending â”‚â”€â”€â–¶â”‚ processing â”‚â”€â”€â–¶â”‚ completed â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                  â”‚                               â”‚
                  â”‚ error + retries < max         â”‚
                  â”‚                               â”‚
                  â””â”€â”€â”€â”€â”€ backoff â”€â”€ retry â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ error + retries >= max
                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  failed  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
taskqueue/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ handler.go
â”‚   â”‚   â”œâ”€â”€ handler_test.go
â”‚   â”‚   â””â”€â”€ router.go
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â””â”€â”€ handlers.go
â”‚   â”œâ”€â”€ queue/
â”‚   â”‚   â”œâ”€â”€ queue.go
â”‚   â”‚   â””â”€â”€ queue_test.go
â”‚   â”œâ”€â”€ task/
â”‚   â”‚   â””â”€â”€ task.go
â”‚   â””â”€â”€ worker/
â”‚       â”œâ”€â”€ pool.go
â”‚       â””â”€â”€ pool_test.go
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .gitignore
â”œâ”€â”€ go.mod
â””â”€â”€ go.sum
```

---

## ğŸ§ª Ğ¢ĞµÑÑ‚Ñ‹

```bash
# Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
go test ./... -v

# Ğ¡ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸ĞµĞ¼
go test ./... -cover

# Ğ¡ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹ Ğ½Ğ° Ğ³Ğ¾Ğ½ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
go test ./... -race
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ğ¸Ğ»Ğ¸ `docker-compose.yml`):

| ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ |
|-----------|----------|-----------------------|
| `SERVER_PORT` | ĞŸĞ¾Ñ€Ñ‚ API ÑĞµÑ€Ğ²ĞµÑ€Ğ° | `8080` |
| `REDIS_ADDR` | ĞĞ´Ñ€ĞµÑ Redis | `localhost:6379` |
| `REDIS_PASSWORD` | ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Redis | _(Ğ¿ÑƒÑÑ‚Ğ¾)_ |
| `REDIS_DB` | ĞĞ¾Ğ¼ĞµÑ€ Ğ±Ğ°Ğ·Ñ‹ Redis (0â€“15) | `0` |
| `WORKER_COUNT` | ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ¾Ñ€ĞºĞµÑ€Ğ¾Ğ² | `3` |